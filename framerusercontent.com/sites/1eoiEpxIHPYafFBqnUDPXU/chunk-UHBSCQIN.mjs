import{a as l,b as f,g as u}from"./chunk-T46VFPIX.mjs";import{C as b,z as s}from"./chunk-ALOT7UQK.mjs";import{p as m,u as y,v as C,y as r,z as v}from"./chunk-DKTB2747.mjs";function h({type:t,url:e,html:n}){return t==="url"&&e?r(M,{url:e}):t==="html"&&n?r(L,{html:n}):r(T,{})}b(h,{type:{type:s.Enum,defaultValue:"url",displaySegmentedControl:!0,options:["url","html"],optionTitles:["URL","HTML"]},url:{title:"URL",type:s.String,description:"Some websites don\u2019t support embedding.",hidden(t){return t.type!=="url"}},html:{title:"HTML",displayTextArea:!0,type:s.String,hidden(t){return t.type!=="html"}}});function T(){return r("div",{style:{...f,overflow:"hidden"},children:r("div",{style:d,children:"To embed a website or widget, add it to the properties\xA0panel."})})}function M({url:t}){/[a-z]+:\/\//.test(t)||(t="https://"+t);let e=u(),[n,o]=C(e?void 0:!1);if(m(()=>{if(!e)return;let i=!0;o(void 0);async function g(){let a=await fetch("https://api.framer.com/functions/check-iframe-url?url="+encodeURIComponent(t));if(a.status==200){let{isBlocked:c}=await a.json();i&&o(c)}else{let c=await a.text();console.error(c);let S=new Error("This site can\u2019t be reached.");o(S)}}return g().catch(a=>{console.error(a),o(a)}),()=>{i=!1}},[t]),!t.startsWith("https://"))return r(p,{message:"Unsupported protocol."});if(n===void 0)return r(R,{});if(n instanceof Error)return r(p,{message:n.message});if(n===!0){let i=`Can't embed ${t} due to its content security policy.`;return r(p,{message:i})}return r("iframe",{src:t,style:E,loading:"lazy",fetchPriority:e?"low":"auto",referrerPolicy:"no-referrer",sandbox:_(e)})}var E={width:"100%",height:"100%",border:"none"};function _(t){let e=["allow-same-origin","allow-scripts"];return t||e.push("allow-downloads","allow-forms","allow-modals","allow-orientation-lock","allow-pointer-lock","allow-popups","allow-popups-to-escape-sandbox","allow-presentation","allow-storage-access-by-user-activation","allow-top-navigation-by-user-activation"),e.join(" ")}function L({html:t}){let e=y(),n=t.includes("<\/script>");return m(()=>{if(!n)return;let o=e.current;return o.innerHTML=t,V(o),()=>{o.innerHTML=""}},[t,n]),r("div",{ref:e,style:O,dangerouslySetInnerHTML:n?void 0:{__html:t}})}var O={width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"};function V(t){if(t instanceof Element&&t.tagName==="SCRIPT"){let e=document.createElement("script");e.text=t.innerHTML;for(let{name:n,value:o}of t.attributes)e.setAttribute(n,o);t.parentElement.replaceChild(e,t)}else for(let e of t.childNodes)V(e)}function R(){return r("div",{className:"framerInternalUI-componentPlaceholder",style:{...l,overflow:"hidden"},children:r("div",{style:d,children:"Loading\u2026"})})}function p({message:t}){return r("div",{className:"framerInternalUI-errorPlaceholder",style:{...l,overflow:"hidden"},children:v("div",{style:d,children:["Error: ",t]})})}var d={textAlign:"center",minWidth:140};export{h as a};
//# sourceMappingURL=chunk-UHBSCQIN.mjs.map
